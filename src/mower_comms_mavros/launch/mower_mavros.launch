<launch>
  <!-- Lancement du backend MAVROS -->
  <include file="$(find mavros)/launch/apm.launch">
    <arg name="fcu_url" value="/dev/ttyUSB0:921600" />  <!-- USB + débit haut -->
    <arg name="gcs_url" value="" />
    <arg name="tgt_system" value="1" />
    <arg name="tgt_component" value="1" />
  </include>

  <!-- Lancement du backend MAVROS → ROS -->
  <node name="mower_comms_mavros" pkg="mower_comm_mavros" type="mower_comms_mavros" output="screen" />

  <!-- Localisation EKF -->
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization_node" output="screen">
    <rosparam command="load" file="$(find mower_comm_mavros)/config/ekf.yaml" />
    <rosparam file="$(find mower_comm_mavros)/launch/params.yaml" command="load" />
  </node>
</launch>
